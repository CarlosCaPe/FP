/*****************************************************************************************
* TABLE     : BLAST_PLAN_EXECUTION_INCR
* SCHEMA    : {{ envi }}_API_REF.FUSE
* SOURCE    : {{ RO_PROD }}_WG.DRILL_BLAST.BLAST_PLAN_EXECUTION
* DATE: 2026-01-23 | AUTHOR: CARLOS CARRILLO
* FIX: 2026-01-28 - Removed NOT NULL from BENCH, PUSHBACK, PATTERN_NAME, BLAST_NAME
*      Source data contains NULL values in these columns
******************************************************************************************/
create or replace TABLE {{ envi }}_API_REF.FUSE.BLAST_PLAN_EXECUTION_INCR (
	ORIG_SRC_ID NUMBER(38,0) NOT NULL,
	SITE_CODE VARCHAR(50) NOT NULL,
	BENCH FLOAT,
	PUSHBACK VARCHAR(50),
	PATTERN_NAME VARCHAR(400),
	BLAST_NAME VARCHAR(5000),
	DRILLED_HOLE_ID NUMBER(38,0) NOT NULL,
	DRILLED_HOLE_NAME VARCHAR(500),
	DRILL_CYCLE_SK NUMBER(38,0),
	BLAST_PLAN_SK NUMBER(38,0),
	SHIFT_ID VARCHAR(500),
	BLAST_ID NUMBER(38,0),
	SHOT_DATE_UTC VARCHAR(50),
	SHOT_DATE_LOCAL VARCHAR(50),
	BLAST_TYPE VARCHAR(400),
	BLAST_ENGINEER_NAME VARCHAR(500),
	LOADING_TRUCK_OPERATOR_NAME VARCHAR(200),
	HOLE_LOADED_TS_UTC VARCHAR(50),
	HOLE_LOADED_TS_LOCAL VARCHAR(50),
	HOLE_LAST_KNOWN_DEPTH_METERS NUMBER(38,5),
	HOLE_LAST_KNOWN_DEPTH_FEET NUMBER(38,5),
	HOLE_TAPED_DEPTH_METERS NUMBER(38,5),
	HOLE_TAPED_DEPTH_FEET NUMBER(38,5),
	HOLE_PLUGGED_FLAG BOOLEAN,
	EXPLOSIVE_PRODUCT_BOTTOM NUMBER(38,0),
	EXPLOSIVE_PRODUCT_TOP NUMBER(38,0),
	EXPLOSIVE_PRODUCT_USED_BOTTOM_KILOGRAMS NUMBER(38,5),
	EXPLOSIVE_PRODUCT_USED_BOTTOM_POUNDS NUMBER(38,5),
	EXPLOSIVE_PRODUCT_USED_TOP_KILOGRAMS NUMBER(38,5),
	EXPLOSIVE_PRODUCT_USED_TOP_POUNDS NUMBER(38,5),
	EXPLOSIVE_PRODUCT_LENGTH_BOTTOM_METERS NUMBER(38,5),
	EXPLOSIVE_PRODUCT_LENGTH_BOTTOM_FEET NUMBER(38,5),
	EXPLOSIVE_PRODUCT_LENGTH_TOP_METERS NUMBER(38,5),
	EXPLOSIVE_PRODUCT_LENGTH_TOP_FEET NUMBER(38,5),
	STEMMING_LENGTH_TOTAL_METERS NUMBER(38,5),
	STEMMING_LENGTH_TOTAL_FEET NUMBER(38,5),
	STEMMING_LENGTH_BOTTOM_METERS NUMBER(38,5),
	STEMMING_LENGTH_BOTTOM_FEET NUMBER(38,5),
	STEMMING_LENGTH_TOP_METERS NUMBER(38,5),
	STEMMING_LENGTH_TOP_FEET NUMBER(38,5),
	BURDEN_METERS NUMBER(38,5),
	BURDEN_FEET NUMBER(38,5),
	SPACING_METERS NUMBER(38,5),
	SPACING_FEET NUMBER(38,5),
	TONS_PER_HOLE NUMBER(38,5),
	KCALS_PER_TON NUMBER(38,5),
	POWDER_FACTOR NUMBER(38,5),
	MEGAJOULES_PER_TON NUMBER(38,5),
	CONFINEMENT_FACTOR NUMBER(38,5),
	PRIMER_COUNT NUMBER(38,0),
	HOLE_TEMPERATURE_CELSIUS NUMBER(38,5),
	HOLE_TEMPERATURE_FAHRENHEIT NUMBER(38,5),
	PRODUCT_BOTTOM_COMMENTS VARCHAR(5000),
	PRODUCT_TOP_COMMENTS VARCHAR(5000),
	STEMMING_BOTTOM_COMMENT VARCHAR(5000),
	STEMMING_TOP_COMMENT VARCHAR(5000),
	WATER_DEPTH_METERS NUMBER(38,5),
	WATER_DEPTH_FEET NUMBER(38,5),
	MISFIRE_FLAG BOOLEAN,
	DW_LOAD_TS TIMESTAMP_NTZ(9),
	DW_MODIFY_TS TIMESTAMP_NTZ(9),
	DW_LOGICAL_DELETE_FLAG VARCHAR(1) DEFAULT 'N',
	constraint PK_BLAST_PLAN_EXECUTION_INCR primary key (ORIG_SRC_ID, SITE_CODE, BENCH, PUSHBACK, PATTERN_NAME, BLAST_NAME, DRILLED_HOLE_ID)
);
